drop database if exists questionaire;

create database questionaire;
use questionaire;

grant select, insert, update, delete \
  on questionaire.* to 'root'@'localhost' \
  identified by '123456';


drop table if exists students;
create table students (
  `studentID` varchar(10) primary key,
  `studentDepartment` varchar(50) not null,
  `country` varchar(50) not null,
  `grade` bit not null,
  `class` bit not null,
  `sex` bit not null,
  `finished` boolean default 0,
  `logintime` DateTime not null default current_timestamp
)engine=innodb default charset=utf8;

drop table if exists departments;
create table departments (
  departmentID varchar(10) primary key,
  departmentName varchar(50) not null
)engine=innodb default charset=utf8;

drop table if exists question;
create table question(
  questionID integer primary key,
  title text not null,
  `option` text not null,
  `type` integer not null default 0,--0 is single select 1 is ms 2 is fill
  `createtime` DateTime not null default current_timestamp,
  `altertime` DateTime not null default current_timestamp,
  score bit
)engine=innodb default charset=utf8;

drop table if exists student_ques;
create table student_ques (
  studentID varchar(10),
  foreign key(studentID) references students(studentID),
  questionID integer,
  foreign key(questionID) references question(questionID),
  primary key(studentID, questionID),
  anstime DateTime default current_timestamp
)engine=innodb default charset=utf8;

drop table if exists log;
create table log (
  id integer primary key auto_increment,
  `time` DateTime default current_timestamp,
  details text not null
)engine=innodb default charset=utf8;
